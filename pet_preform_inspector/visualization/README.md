---

## üìÅ `visualization/`

–ú–æ–¥—É–ª—å `visualization` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ **–æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏ –∏—Ç–æ–≥–æ–≤—É—é –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é** —ç—Ç–∞–ø–æ–≤ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–µ—Ñ–æ—Ä–º—ã. –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø–∞–ø–∫—É `debug_output/` **—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö —Ñ–ª–∞–≥–∞—Ö –æ—Ç–ª–∞–¥–∫–∏** –∏–∑ `config.py`.
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ `utils.save_debug_image`.

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç **–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–µ—Ñ–æ—Ä–º—ã** (`neck_left` / `neck_right`) ‚Äî —Ä–∞–∑–º–µ—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –Ω—É–∂–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –æ–±—ä–µ–∫—Ç–∞.

---

### üìÑ `visualization/contour_alignment_viz.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ **–≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è –∫–æ–Ω—Ç—É—Ä–∞** –ø–æ –≥–ª–∞–≤–Ω–æ–π –æ—Å–∏ —Å –ø–æ–º–æ—â—å—é PCA.

#### üîß –§—É–Ω–∫—Ü–∏–∏

*   **`visualize_contour_alignment(..., step_flag: bool = False)`**
    *   **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞—ë—Ç –æ—Ç–ª–∞–¥–æ—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ **–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º (–Ω–µ –ø–æ–≤—ë—Ä–Ω—É—Ç–æ–º) –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏**, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–µ–µ:
        - –∏—Å—Ö–æ–¥–Ω—ã–π –ø–ª–æ—Ç–Ω—ã–π –∫–æ–Ω—Ç—É—Ä –ø—Ä–µ—Ñ–æ—Ä–º—ã (–∑–µ–ª—ë–Ω—ã–π),
        - –≥–∞–±–∞—Ä–∏—Ç–Ω—ã–µ —Ç–æ—á–∫–∏ (`leftmost`, `rightmost`, `topmost`, `bottommost` ‚Äî –∫—Ä–∞—Å–Ω—ã–µ),
        - —Ü–µ–Ω—Ç—Ä–æ–∏–¥ (–∫—Ä–∞—Å–Ω–∞—è —Ç–æ—á–∫–∞),
        - **–æ—Å—å –¥–æ –ø–æ–≤–æ—Ä–æ—Ç–∞** ‚Äî –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –ª–∏–Ω–∏—è, –ø—Ä–æ—Ö–æ–¥—è—â–∞—è —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–æ–∏–¥ –ø–æ–¥ —É–≥–ª–æ–º PCA,
        - **–æ—Å—å –ø–æ—Å–ª–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è** ‚Äî —Å–ø–ª–æ—à–Ω–∞—è –ª–∏–Ω–∏—è, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Å–∏ –≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–æ –≤ –∏—Å—Ö–æ–¥–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç.
    *   **–£—Å–ª–æ–≤–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:** –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ `step_flag=True` (–æ–±—ã—á–Ω–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–∞–∫ `config.STEP_2_ALIGN_CONTOUR`).
    *   **–ò–º—è —Ñ–∞–π–ª–∞:** `<image_id>_09_aligned_contour_debug.jpg`
    *   **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
        - –î–ª–∏–Ω–∞ –æ—Å–µ–≤—ã—Ö –ª–∏–Ω–∏–π –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ **–Ω–æ–º–∏–Ω–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã** –∏–∑ `dimensions_data` + –∑–∞–ø–∞—Å 20 –º–º.
        - –í—Å–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –º–µ–∂–¥—É –≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω–æ–π –∏ –∏—Å—Ö–æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–∞–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å –ø–æ–º–æ—â—å—é `rot_mat` –∏ `cv2.invertAffineTransform`.

---

### üìÑ `visualization/annotated_result_viz.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è **—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —á–µ—Ä—Ç–µ–∂–∞** –≤ —Å—Ç–∏–ª–µ CAD —Å –Ω–∞–Ω–µ—Å—ë–Ω–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–¥ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–µ—Ñ–æ—Ä–º—ã.

#### üîß –§—É–Ω–∫—Ü–∏–∏

*   **`visualize_dimensioned_drawing(..., step_flag: bool = False)`**
    *   **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞—ë—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —á–µ—Ä—Ç—ë–∂:
        1. –ò—Å—Ö–æ–¥–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ **–ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è** –ø–æ –º–∞—Ç—Ä–∏—Ü–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è (`rot_mat`).
        2. –ü—Ä–µ—Ñ–æ—Ä–º–∞ **—Å–¥–≤–∏–≥–∞–µ—Ç—Å—è –≤ —Ü–µ–Ω—Ç—Ä —Ö–æ–ª—Å—Ç–∞** –¥–ª—è —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.
        3. –ù–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–Ω–æ—Å—è—Ç—Å—è:
            - –∫–æ–Ω—Ç—É—Ä –ø—Ä–µ—Ñ–æ—Ä–º—ã (–∑–µ–ª—ë–Ω—ã–π),
            - —Ü–µ–Ω—Ç—Ä–æ–∏–¥ (–∫—Ä–∞—Å–Ω–∞—è —Ç–æ—á–∫–∞),
            - **–ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –æ—Å–µ–≤–∞—è –ª–∏–Ω–∏—è** (–∂—ë–ª—Ç–∞—è),
            - –≥–∞–±–∞—Ä–∏—Ç–Ω—ã–µ —Ç–æ—á–∫–∏ (–∫—Ä–∞—Å–Ω—ã–µ),
            - **—Ä–∞–∑–º–µ—Ä–Ω—ã–µ –ª–∏–Ω–∏–∏** —Å –≤—ã–Ω–æ—Å–Ω—ã–º–∏ –ª–∏–Ω–∏—è–º–∏, —Å—Ç—Ä–µ–ª–∫–∞–º–∏ –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ –¥–ª—è:
                - **–¥–ª–∏–Ω—ã (L)** ‚Äî –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä,
                - **—à–∏—Ä–∏–Ω—ã (Z)** ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä,
                - **–¥–∏–∞–º–µ—Ç—Ä–∞ –¥–Ω–∞ (d1)** ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤ –∑–æ–Ω–µ –¥–Ω–∞.
        4. –¢–µ–∫—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ `"L = 142.35 mm / 1139 px"` —Å —Ñ–æ–Ω–æ–º –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏.
    *   **–£—Å–ª–æ–≤–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:** –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ `step_flag=True` (–æ–±—ã—á–Ω–æ `config.STEP_3_MEASURE_DIMENSIONS`).
    *   **–ò–º—è —Ñ–∞–π–ª–∞:** `<image_id>_10_size_visualization.jpg`
    *   **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
        - **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤**:
            - –î–ª—è **Z**: —Ä–∞–∑–º–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **—Å–ª–µ–≤–∞**, –µ—Å–ª–∏ –≥–æ—Ä–ª—ã—à–∫–æ —Å–ª–µ–≤–∞ (`neck_left`), –∏ **—Å–ø—Ä–∞–≤–∞** ‚Äî –µ—Å–ª–∏ –≥–æ—Ä–ª—ã—à–∫–æ —Å–ø—Ä–∞–≤–∞ (`neck_right`).
            - –î–ª—è **d1**: —Ä–∞–∑–º–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **—Å–ª–µ–≤–∞**, –µ—Å–ª–∏ –¥–Ω–æ —Å–ª–µ–≤–∞ (—Ç.–µ. `neck_right`), –∏ **—Å–ø—Ä–∞–≤–∞** ‚Äî –µ—Å–ª–∏ –¥–Ω–æ —Å–ø—Ä–∞–≤–∞ (`neck_left`).
        - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞** –¥–ª—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ (Z, d1).
        - –í—Å–µ —Å—Ç–∏–ª–∏ (—Ü–≤–µ—Ç–∞, —Ç–æ–ª—â–∏–Ω—ã, —Ä–∞–∑–º–µ—Ä—ã —Å—Ç—Ä–µ–ª–æ–∫, –æ—Ç—Å—Ç—É–ø—ã) –∑–∞–¥–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `DEFAULT_CONFIG`.
        - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è** `draw_dimension_universal`, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∞—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—é –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è, —Å—Ç—Ä–µ–ª–æ–∫ –∏ –≤—ã–Ω–æ—Å–Ω—ã—Ö –ª–∏–Ω–∏–π.

#### üîß –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

*   **`draw_rotated_text(...)`**
    –†–∏—Å—É–µ—Ç —Ç–µ–∫—Å—Ç —Å –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–º —Ñ–æ–Ω–æ–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏.

*   **`draw_dashed_line(...)`**
    –†–∏—Å—É–µ—Ç –ø—É–Ω–∫—Ç–∏—Ä–Ω—É—é –ª–∏–Ω–∏—é –∑–∞–¥–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã —à—Ç—Ä–∏—Ö–∞.

*   **`draw_dimension_universal(...)`**
    –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–µ—Ä —Ä–∞–∑–º–µ—Ä–Ω–æ–π –ª–∏–Ω–∏–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
    - –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö –∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤,
    - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö (`inward`) –∏ –≤–Ω–µ—à–Ω–∏—Ö (`outward`) —Å—Ç—Ä–µ–ª–æ–∫,
    - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–ª–∏ —Ä—É—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Å—Ç–æ—Ä–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è,
    - –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ–¥ `neck_orientation`.

---

### üìå –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

| –ê—Å–ø–µ–∫—Ç | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|-------|------------|
| **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤** | –ß–µ—Ä–µ–∑ `utils.save_debug_image` ‚Üí –≤—Å–µ–≥–¥–∞ –≤ `debug_output/` |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–∏–µ–º** | –ß–µ—Ä–µ–∑ –±—É–ª–µ–≤—ã —Ñ–ª–∞–≥–∏ –∏–∑ `config.py` (`STEP_2_*`, `STEP_3_*`) |
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** | –¢–æ–ª—å–∫–æ `cv2`, `numpy`, `utils` ‚Äî –Ω–µ—Ç –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `os` –∏–ª–∏ `cv2.imwrite` |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Å—Ç—ã—Ö –∫–æ–Ω—Ç—É—Ä–æ–≤, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞–Ω–∏—Ü –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è |
| **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–µ—Ñ–æ—Ä–º—ã (`neck_left` / `neck_right`) |
| **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** | –ù–æ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `DEFAULT_CONFIG["dimensions"]` |

---

### üñºÔ∏è –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

| –§–ª–∞–≥ | –§–∞–π–ª | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ |
|------|------|-----------|
| `STEP_2_ALIGN_CONTOUR = True` | `*_09_aligned_contour_debug.jpg` | –û—Ä–∏–≥–∏–Ω–∞–ª + –æ—Å–∏ PCA + –≥–∞–±–∞—Ä–∏—Ç–Ω—ã–µ —Ç–æ—á–∫–∏ |
| `STEP_3_MEASURE_DIMENSIONS = True` | `*_10_size_visualization.jpg` | –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–µ—Ä—Ç—ë–∂ —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏ L, Z, d1, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é |

---